# üöÄ Complete Zap Creation Guide

This guide provides step-by-step instructions for creating the two main Zap templates for FollowThrough AI integration.

## üìß **Zap Template 1: Email Triage Automation**

### **Overview**
**Purpose:** Automatically analyze and categorize incoming support emails with AI-powered insights
**Flow:** Gmail New Email ‚Üí FollowThrough AI Email Triage ‚Üí Optional Notification

### **Step-by-Step Setup**

#### **Step 1: Create New Zap**
1. Go to [zapier.com](https://zapier.com) and click "Create Zap"
2. Name your Zap: "Email Triage Automation"

#### **Step 2: Set up Gmail Trigger**
1. **Choose App:** Search for "Gmail" and select it
2. **Choose Event:** Select "New Email"
3. **Connect Account:** 
   - Click "Sign in to Gmail"
   - Authorize Zapier to access your Gmail account
4. **Configure Trigger:**
   ```
   Search String: is:unread to:support@yourcompany.com
   Label: (leave blank or select specific labels)
   Max Results: 1
   ```
5. **Test Trigger:** Click "Test trigger" to verify it finds emails

#### **Step 3: Add FollowThrough AI Action**
1. **Choose App:** Search for "FollowThrough AI Integration"
2. **Choose Event:** Select "Trigger Email Triage"
3. **Connect Account:**
   - Enter your FollowThrough AI API key
   - API Key format: `followthrough_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx`
4. **Configure Action:**
   ```
   Email ID: {{Gmail: Message ID}}
   Message ID: {{Gmail: Message ID}}
   Thread ID: {{Gmail: Thread ID}}
   Priority: high
   Custom Instructions: Focus on urgency and customer sentiment analysis
   ```
5. **Test Action:** Click "Test action" to verify the integration works

#### **Step 4: Optional - Add Slack Notification**
1. **Choose App:** Search for "Slack"
2. **Choose Event:** Select "Send Channel Message"
3. **Configure Message:**
   ```
   Channel: #support
   Message Text: 
   üö® New Support Email Triaged:
   
   üìß Subject: {{Gmail: Subject}}
   üë§ From: {{Gmail: From}}
   üéØ Priority: {{FollowThrough AI: Classification Priority}}
   üìÇ Category: {{FollowThrough AI: Classification Category}}
   üìù Summary: {{FollowThrough AI: Summary}}
   
   üí¨ Suggested Reply:
   {{FollowThrough AI: Draft Reply Body}}
   ```

#### **Step 5: Turn On Zap**
1. Click "Publish Zap"
2. Your email triage automation is now live!

---

## üìÖ **Zap Template 2: Daily Email Brief**

### **Overview**
**Purpose:** Get a daily AI-generated summary of unread emails with priorities and action items
**Flow:** Schedule Daily ‚Üí Find Emails ‚Üí Generate Brief ‚Üí Send Summary Email

### **Step-by-Step Setup**

#### **Step 1: Create New Zap**
1. Go to [zapier.com](https://zapier.com) and click "Create Zap"
2. Name your Zap: "Daily Email Brief"

#### **Step 2: Set up Schedule Trigger**
1. **Choose App:** Search for "Schedule by Zapier"
2. **Choose Event:** Select "Every Day"
3. **Configure Schedule:**
   ```
   Time: 8:00 AM
   Timezone: Your timezone
   Days of the Week: Monday, Tuesday, Wednesday, Thursday, Friday
   ```

#### **Step 3: Find Recent Emails**
1. **Choose App:** Search for "FollowThrough AI Integration"
2. **Choose Event:** Select "Find Emails"
3. **Configure Search:**
   ```
   Query: is:unread newer_than:1d
   Max Results: 20
   From Email: (leave blank for all senders)
   To Email: (leave blank or specify your email)
   Has Attachment: (leave blank)
   Is Unread: true
   ```

#### **Step 4: Generate Daily Brief**
1. **Choose App:** Search for "FollowThrough AI Integration"
2. **Choose Event:** Select "Create Draft Reply"
3. **Configure Brief Generation:**
   ```
   Original Email ID: summary-{{Schedule: Date}}
   Original Subject: Daily Email Brief Request
   Original From: system@yourcompany.com
   Original Body: Please create a daily summary of the following emails: {{Find Emails: Subject}} from {{Find Emails: From}}
   Reply Tone: professional
   Custom Instructions: Create a comprehensive daily email brief with:
   - Priority categorization (urgent, high, medium, low)
   - Key action items required
   - Summary of main topics
   - Recommended response timeline
   Include email count and sender breakdown.
   ```

#### **Step 5: Send Brief Email**
1. **Choose App:** Search for "Gmail"
2. **Choose Event:** Select "Send Email"
3. **Configure Email:**
   ```
   To: your-email@company.com
   Subject: üìß Daily Email Brief - {{Schedule: Date}}
   Body: 
   Good morning! Here's your daily email brief:
   
   {{FollowThrough AI: Body}}
   
   ---
   Generated by FollowThrough AI
   Total emails processed: {{Find Emails: Count}}
   ```

#### **Step 6: Turn On Zap**
1. Click "Publish Zap"
2. Your daily email brief is now automated!

---

## üîó **Frontend Integration URLs**

### **Template URLs for Embedding**

Replace `YOUR_APP_ID` with your actual Zapier app ID:

```javascript
const zapTemplates = {
  emailTriage: {
    zapierUrl: 'https://zapier.com/app/editor/template/followthrough-email-triage',
    embedUrl: 'https://zapier.com/partner/embed/followthrough-email-triage',
    quickCreateUrl: 'https://zapier.com/app/editor?trigger_app=gmail&action_app=YOUR_APP_ID'
  },
  dailyBrief: {
    zapierUrl: 'https://zapier.com/app/editor/template/followthrough-daily-brief',
    embedUrl: 'https://zapier.com/partner/embed/followthrough-daily-brief',
    quickCreateUrl: 'https://zapier.com/app/editor?trigger_app=schedule&action_app=YOUR_APP_ID'
  }
};
```

### **React Button Components**

```jsx
// Email Triage Button
<Button 
  onClick={() => window.open(zapTemplates.emailTriage.zapierUrl, '_blank')}
  className="bg-blue-600 hover:bg-blue-700"
>
  üöÄ Setup Email Triage Automation
</Button>

// Daily Brief Button  
<Button 
  onClick={() => window.open(zapTemplates.dailyBrief.zapierUrl, '_blank')}
  className="bg-green-600 hover:bg-green-700"
>
  üìÖ Setup Daily Email Brief
</Button>

// Embedded Setup Modal
const openEmbeddedSetup = (templateType) => {
  const embedUrl = zapTemplates[templateType].embedUrl;
  const modal = window.open('', '_blank', 'width=1000,height=700');
  modal.document.write(`
    <iframe src="${embedUrl}" width="100%" height="100%" frameborder="0"></iframe>
  `);
};
```

---

## üéØ **Advanced Zap Ideas**

### **3. Meeting Follow-up Automation**
- **Trigger:** Google Calendar "Event Ended"
- **Action:** FollowThrough AI "Trigger Meeting Analysis"
- **Follow-up:** Create tasks in project management tool

### **4. Email to Task Extraction**
- **Trigger:** Gmail "Email Matching Search" (contains "TODO" or "ACTION")
- **Action:** FollowThrough AI "Create Task From Email"
- **Follow-up:** Add to Asana/Trello/Monday.com

### **5. VIP Email Priority**
- **Trigger:** Gmail "New Email" from VIP senders
- **Action:** FollowThrough AI "Trigger Email Triage" with high priority
- **Follow-up:** Send immediate SMS notification

---

## üîß **Troubleshooting**

### **Common Issues**

1. **API Key Not Working**
   - Ensure API key starts with `followthrough_`
   - Check that your FollowThrough AI server is running
   - Verify the API key hasn't expired

2. **Gmail Connection Failed**
   - Re-authorize Gmail access in Zapier
   - Check Gmail search syntax
   - Ensure you have emails matching the search criteria

3. **Zap Not Triggering**
   - Check Zap is turned ON
   - Verify trigger conditions are met
   - Look at Zap History for error details

4. **FollowThrough AI Action Failing**
   - Check server logs for API errors
   - Verify webhook endpoints are accessible
   - Test API key with curl command

### **Testing Commands**

```bash
# Test API key
curl -X GET "https://your-server.com/api/zapier/test" \
  -H "x-api-key: your-zapier-api-key"

# Test email triage endpoint
curl -X POST "https://your-server.com/api/zapier/webhooks/email" \
  -H "Content-Type: application/json" \
  -H "x-api-key: your-zapier-api-key" \
  -d '{"emailId": "test-123", "subject": "Test Email"}'
```

---

## üìä **Success Metrics**

Track these metrics to measure automation success:

- **Email Response Time:** Average time from receipt to first response
- **Triage Accuracy:** Percentage of correctly categorized emails
- **Automation Usage:** Number of emails processed automatically
- **User Satisfaction:** Feedback on AI-generated responses
- **Time Saved:** Hours saved per week through automation

---

## üöÄ **Next Steps**

1. **Create your first Zap** using the Email Triage template
2. **Test thoroughly** with sample emails
3. **Monitor performance** for the first week
4. **Iterate and improve** based on results
5. **Scale to additional workflows** as needed

Your FollowThrough AI Zapier integration is now ready to automate your email workflows! üéâ 